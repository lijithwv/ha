living_night_routine:
  sequence:
  - parallel:
    - action: script.living_corner_lamp_on
      metadata: {}
      data:
        brightness: 10
    - action: script.living_table_lamp_off
      metadata: {}
      data: {}
    - action: script.living_tv_off
      metadata: {}
      data: {}
  alias: Living Night Routine
  description: ''
living_away_routine:
  sequence:
  - action: light.turn_off
    metadata: {}
    data: {}
    target:
      area_id: living_room
  - if:
    - condition: state
      entity_id: remote.livingroomtv
      state: 'on'
    then:
    - action: remote.turn_off
      metadata: {}
      data: {}
      target:
        entity_id: remote.livingroomtv
  alias: Living Off Routine
  description: ''
porch_light_on:
  sequence:
  - target:
      entity_id: light.porch_light
    data:
      color_temp_kelvin: 2000
      brightness_pct: '{{ brightness | default(100) }}'
    action: light.turn_on
  alias: Porch Light On
  fields:
    brightness:
      description: Brightness percentage (1-100)
      example: 50
  description: ''
living_corner_lamp_on:
  sequence:
  - target:
      entity_id: light.living_corner_lamp
    data:
      color_temp_kelvin: 2000
      brightness_pct: '{{ brightness | default(100) }}'
    action: light.turn_on
  alias: Living Corner Lamp On
  fields:
    brightness:
      description: Brightness percentage (1-100)
      example: 50
  description: ''
living_table_lamp_on:
  sequence:
  - action: light.turn_on
    metadata: {}
    data:
      color_temp_kelvin: 2000
      brightness_pct: '{{ brightness | default(30) }}'
    target:
      entity_id: light.living_table_lamp
  fields:
    brightness:
      description: Brightness percentage (1-100)
      example: 50
  description: ''
  alias: Living Table Lamp On
porch_light_off:
  sequence:
  - action: light.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: light.porch_light
  alias: Porch Light Off
  description: ''
living_corner_lamp_off:
  sequence:
  - action: light.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: light.living_corner_lamp
  alias: Living Corner Lamp Off
  description: ''
living_table_lamp_off:
  sequence:
  - action: light.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: light.living_table_lamp
  alias: Living Table Lamp Off
  description: ''
backup_ha_config_to_github:
  sequence:
  - action: shell_command.git_backup
    metadata: {}
    data: {}
    response_variable: backup_result
  - if:
    - condition: template
      value_template: '{{ backup_result.returncode != 0 }}'
    then:
    - action: notify.mobile_app_iphone_l
      metadata: {}
      data:
        title: âŒ Backup Failed
        message: "Git backup failed.                 \nResult: {{ backup_result }}"
  alias: Backup HA Config to GitHub
  description: ''
theatre_sunset_light_on:
  sequence:
  - action: light.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: light.anko_wi_fi_sunset_light
  alias: Theatre Sunset Light On
  description: ''
theatre_sunset_light_off:
  sequence:
  - action: light.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: light.anko_wi_fi_sunset_light
  alias: Theatre Sunset light off
  description: ''
living_evening_routine:
  sequence:
  - parallel:
    - action: script.living_table_lamp_on
      metadata: {}
      data:
        brightness: 30
    - action: script.living_corner_lamp_on
      metadata: {}
      data:
        brightness: 100
    - action: script.living_tv_on
      metadata: {}
      data: {}
  alias: Living Evening Routine
  description: ''
living_tv_on:
  sequence:
  - if:
    - condition: template
      value_template: '{{ states(''remote.livingroomtv'') != ''on'' }}'
    then:
    - action: remote.turn_on
      metadata: {}
      data: {}
      target:
        entity_id: remote.livingroomtv
  alias: Living TV On
  description: ''
living_tv_off:
  sequence:
  - if:
    - condition: template
      value_template: '{{ states(''remote.livingroomtv'') != ''off'' }}'
    then:
    - action: remote.turn_on
      metadata: {}
      data: {}
      target:
        entity_id: remote.livingroomtv
  alias: Living TV Off
  description: ''
away_routine:
  sequence:
  - action: light.turn_off
    metadata: {}
    data: {}
    target:
      area_id:
      - living_room
      - theatre
  - action: script.living_tv_off
    metadata: {}
    data: {}
  alias: Away Routine
  description: ''
doors_check:
  sequence:
  - variables:
      sensors:
      - binary_sensor.living_room_sensor_sliding_door_window
      - binary_sensor.laundry_room_sensor_sliding_door_window
      - binary_sensor.entrance_sensor_door
      garage_not_closed: '{{ ''closed'' not in states(''sensor.garage_status'') |
        lower }}

        '
      open_sensors: "{{ expand(sensors)\n  | selectattr('state', 'eq', 'on')\n  |
        map(attribute='entity_id')\n  | list }}\n"
      any_open_sensors: '{{ open_sensors | count > 0 }}'
      bad_sensors: "{{ expand(sensors)\n  | selectattr('state', 'in', ['unknown',
        'unavailable'])\n  | map(attribute='entity_id')\n  | list }}\n"
      any_bad_sensors: '{{ bad_sensors | count > 0 }}'
  - if:
    - condition: template
      value_template: '{{ any_open_sensors or any_bad_sensors or garage_not_closed
        }} '
    then:
    - data:
        title: Open Door Alert
        message: "{% if garage_not_closed %}Garage is not closed.{% endif %} {% if
          any_open_sensors %}\n  The following doors are open:\n  {{ open_sensors
          | map('state_attr', 'friendly_name') | join(', ') }}\n{% endif %} {% if
          any_bad_sensors %}\n  The following doors are in bad status:\n  {{ bad_sensors
          | map('state_attr', 'friendly_name') | join(', ') }}\n{% endif %}\n"
      action: notify.mobile_app_iphone_l
    else:
    - action: notify.mobile_app_iphone_l
      metadata: {}
      data:
        message: All doors are closed
        title: Doors Check
  alias: Doors Check
  description: ''
turn_on_backyard_floodlight:
  sequence:
  - type: turn_on
    device_id: e58b62ad3d2b0852fbb8c3b65dd5d75b
    entity_id: 33efe388716a0405121ef6b8c89acd08
    domain: light
  alias: Backyard Floodlight On
  description: ''
backyard_floodlight_off:
  sequence:
  - type: turn_off
    device_id: e58b62ad3d2b0852fbb8c3b65dd5d75b
    entity_id: 33efe388716a0405121ef6b8c89acd08
    domain: light
  alias: Backyard Floodlight Off
  description: ''
garage_door_control:
  use_blueprint:
    path: homeassistant/confirmable_notification.yaml
    input:
      notify_device: 83f5d3039d66859d74a9998ea9308889
      title: Open/Close Garage
      confirm_action:
      - action: cover.open_cover
        metadata: {}
        target:
          entity_id: cover.smart_garage
        data: {}
      message: Force press for options
      confirm_text: Open
      dismiss_text: Close
      dismiss_action:
      - action: cover.close_cover
        metadata: {}
        target:
          entity_id: cover.smart_garage
        data: {}
  alias: Garage Door Control
  description: ''
theatre_evening_routine:
  sequence:
  - action: script.theatre_sunset_light_on
    metadata: {}
    data: {}
  alias: Theatre Evening Routine
  description: ''
